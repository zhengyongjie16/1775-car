(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3a21b328"],{"49ac":function(e,t,a){},"6a6c":function(e,t,a){"use strict";var n=a("49ac"),i=a.n(n);i.a},f277:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"MyCustomer"},[a("van-nav-bar",{attrs:{title:"我的客户","left-text":"返回","left-arrow":""},on:{"click-left":function(t){return e.$router.go(-1)}}}),a("van-pull-refresh",{staticClass:"mcsBody",on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[a("van-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("van-tab",{attrs:{title:"未跟进"}},e._l(e.unFollow,function(t){return a("div",{key:t.id,staticClass:"cmbox"},[a("h1",[e._v(" "+e._s(t.vehicleInfo.title))]),a("div",[a("p",[e._v("客户电话:"+e._s(t.phoneNum))]),a("p",[e._v("添加时间:"+e._s(e._f("moment")(new Date(t.addTime),"YYYY-MM-DD HH:mm")))]),a("p",[e._v("跟进次数:"+e._s(t.visitCount))]),a("p",[e._v("最后跟进时间:"+e._s(t.endDate))]),a("p",[e._v("最后跟进结果:"+e._s(t.state))])]),a("div",{staticClass:"opt"},[a("van-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.showFL(t)}}},[e._v("跟进")]),a("van-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"}},[a("a",{attrs:{href:"tel:"+t.phoneNum}},[e._v("\n                联系客户\n              ")])])],1)])}),0),a("van-tab",{attrs:{title:"已跟进"}},e._l(e.followed,function(t){return a("div",{key:t.id,staticClass:"cmbox"},[a("h1",[e._v(" "+e._s(t.vehicleInfo.title))]),a("div",[a("p",[e._v("客户电话:"+e._s(t.phoneNum))]),a("p",[e._v("添加时间:"+e._s(e._f("moment")(new Date(t.addTime),"YYYY-MM-DD HH:mm")))]),a("p",[e._v("跟进次数:"+e._s(t.visitCount))]),a("p",[e._v("最后跟进时间:"+e._s(e._f("moment")(new Date(t.endDate),"YYYY-MM-DD HH:mm")))]),a("p",[e._v("最后跟进结果:"+e._s(t.state))])]),a("div",{staticClass:"opt"},[a("van-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){return e.showFL(t)}}},[e._v("跟进")]),a("van-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(a){return e.sf(t)}}},[e._v("释放客户")])],1)])}),0)],1)],1),a("el-pagination",{attrs:{"current-page":e.paging,layout:"prev, pager, next, jumper","page-size":e.pageSize,total:e.maxpaging},on:{"update:currentPage":function(t){e.paging=t},"update:current-page":function(t){e.paging=t},"current-change":e.currentChange,"size-change":e.sizeChange}}),a("div",{staticClass:"WinM",style:e.Dis,on:{click:e.Disnone}}),a("div",{staticClass:"releaseKh",style:e.KhDis},[a("div",{staticClass:"BusClose"},[a("i",{staticClass:"el-icon-close",on:{click:e.Disnone}})]),a("p",[e._v("确认释放客户")]),a("div",{staticClass:"StateBtn"},[a("div",{staticClass:"StateBtnconfirm",on:{click:e.releaseKhOk}},[e._v("确定")]),a("div",{staticClass:"StateBtnCancel",on:{click:e.Disnone}},[e._v("取消")])])]),a("van-popup",{model:{value:e.flBox,callback:function(t){e.flBox=t},expression:"flBox"}},[a("div",{staticClass:"fbox"},[a("el-form",{ref:"form",attrs:{model:e.orderInfo,"label-width":"80px",size:"mini"}},[a("el-form-item",{attrs:{label:"客户姓名"}},[a("el-input",{attrs:{placeholder:"请详细咨询客户姓名"},model:{value:e.orderInfo.consumerName,callback:function(t){e.$set(e.orderInfo,"consumerName",t)},expression:"orderInfo.consumerName"}})],1),a("el-form-item",{attrs:{label:"客户预算"}},[a("el-input",{attrs:{placeholder:"客服购车预算"},model:{value:e.orderInfo.money,callback:function(t){e.$set(e.orderInfo,"money",t)},expression:"orderInfo.money"}})],1),a("el-form-item",{attrs:{label:"预约时间"}},[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.orderInfo.orderTime,callback:function(t){e.$set(e.orderInfo,"orderTime",t)},expression:"orderInfo.orderTime"}})],1),a("el-form-item",{attrs:{label:"付款方式"}},[a("el-radio-group",{model:{value:e.orderInfo.payMode,callback:function(t){e.$set(e.orderInfo,"payMode",t)},expression:"orderInfo.payMode"}},[a("el-radio-button",{attrs:{label:1,value:1}},[e._v("全款")]),a("el-radio-button",{attrs:{label:2,value:2}},[e._v("贷款")])],1)],1),a("el-form-item",[a("el-button",{on:{click:e.doAdd}},[e._v("确认")])],1)],1)],1)])],1)},i=[],s=(a("96cf"),a("3b8d")),o=a("2241"),r={name:"MyCustomer",data:function(){return{active:0,isLoading:!1,cusData:[],StateNum:"0",StateColor:"StateColor",GuestStateLiData:["跟进","邀约","到店","成交","战败","客户关怀","回收客户"],unFollow:[],followed:[],FastSelect:"",CreateTime:"",CustFrom:"",CustLevel:"",EndGoTime:"",GoState:"",EarlyState:"",paging:1,maxpaging:40,pageSize:20,CustFromData:[{value:"直接来源"},{value:"朋友介绍"},{value:"1775二手车网"},{value:"线下活动"}],CustLevelData:[{value:"全部"},{value:"H-当天回访"},{value:"A-3天内回访"}],GoStateData:[{value:"成功销售"},{value:"销售失败"},{value:"延期购买"},{value:"全部"}],EarlyStateData:[{value:"全部预警"},{value:"正常"},{value:"黄色"},{value:"蓝色"},{value:"橙色"},{value:"红色"}],MyCusLiData:!0,releaseKhId:"",Dis:{display:"none"},KhDis:{display:"none"},nowOrder:null,flBox:!1,orderInfo:{money:"",orderTime:null,consumerName:"",payMode:1,orderId:""}}},methods:{doAdd:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.post("order/fl",{consumerName:this.orderInfo.consumerName,orderTime:this.orderInfo.orderTime?this.orderInfo.orderTime.getTime():"",money:this.orderInfo.money?this.orderInfo.money:0,payMode:this.orderInfo.payMode,orderId:this.orderInfo.orderId});case 2:t=e.sent,a=t.data,n=a.success,a.data,n?(this.$message.success("跟进状态更新成功"),this.khSelect()):this.$message.warning("跟进状态更新有误"),this.flBox=!1;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),showFL:function(e){this.nowOrder=e,this.orderInfo={money:e.money,orderTime:e.orderTime?new Date(e.orderTime):null,consumerName:e.consumerName,payMode:e.payMode,orderId:e.id},this.flBox=!0},onRefresh:function(){this.khSelect()},empty:function(){},sf:function(e){var t=this;o["a"].confirm({title:"请确认",message:"释放该用户将不能再看到该信息"}).then(Object(s["a"])(regeneratorRuntime.mark(function a(){var n,i,s;return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$api.post("order/sf",{orderId:e.id});case 2:n=a.sent,i=n.data,s=i.success,i.data,s&&t.$message.success("释放成功"),t.khSelect();case 6:case"end":return a.stop()}},a)}))).catch(function(){})},khSelect:function(){var e=this;this.isLoading=!0,this.$api.post("findOrderList",{sdate:this.CreateTime[0]?this.CreateTime[0].getTime():"",edate:this.CreateTime[1]?this.CreateTime[1].getTime():"",page:this.paging,limit:this.pageSize,consumerName:this.FastSelect,state:this.GoState,companyId:this.$store.state.company.id,isFollow:1}).then(function(t){e.followed=t.data.data.list,e.maxpaging=t.data.data.totalCount,e.isLoading=!1}),this.$api.post("findOrderList",{sdate:this.CreateTime[0]?this.CreateTime[0].getTime():"",edate:this.CreateTime[1]?this.CreateTime[1].getTime():"",page:this.paging,limit:this.pageSize,consumerName:this.FastSelect,state:this.GoState,companyId:this.$store.state.company.id,isFollow:0}).then(function(t){e.unFollow=t.data.data.list,e.maxpaging=t.data.data.totalCount,e.isLoading=!1})},Disnone:function(){this.Dis.display="none",this.KhDis.display="none"},followUp:function(e){this.$api.get("/visitClient",{params:{orderId:e}}).then(function(e){alert(e.data.info)})},releaseKh:function(e){this.Dis.display="block",this.KhDis.display="block",this.$api.get("/deleteClient",{params:{clientId:e.consumerId}}).then(function(e){alert(e.data.info)})},placeOrder:function(){},releaseKhOk:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.Dis.display="none",this.KhDis.display="none",e.next=4,this.$api.get("deleteClient",{params:{consumerId:this.releaseKhId}});case 4:t=e.sent,alert(t.data.info);case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),currentChange:function(e){this.paging=e,this.khSelect()},sizeChange:function(e){this.pageSize=e,this.khSelect()}},created:function(){this.khSelect()}},l=r,c=(a("6a6c"),a("2877")),d=Object(c["a"])(l,n,i,!1,null,"42e28ac8",null);t["default"]=d.exports}}]);